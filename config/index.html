<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://skoczen.github.io/will/config/">
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>Configure</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Will</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Get Started</a>
                </li>
            
            
            
                <li >
                    <a href="../upgrading_to_2/">Upgrade to 2.0</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Teach Your Will <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../plugins/basics/">The Basics</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/notice/">What Will Can Notice</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/reply/">How Will Can Respond</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/create/">Creating and Organizing Plugins</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/builtins/">Plugin Builtins</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/bundled/">Bundled Plugins</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Configure</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Brain <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../backends/overall/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../backends/io/">Noticing and Talking</a>
                        </li>
                    
                        <li >
                            <a href="../backends/analysis/">Analysis and Context</a>
                        </li>
                    
                        <li >
                            <a href="../backends/generation/">Generation</a>
                        </li>
                    
                        <li >
                            <a href="../backends/execution/">Decisions and Execution</a>
                        </li>
                    
                        <li >
                            <a href="../backends/pubsub/">Pubsub and short-term memory</a>
                        </li>
                    
                        <li >
                            <a href="../backends/storage/">Storage and long-term memory</a>
                        </li>
                    
                        <li >
                            <a href="../backends/encryption/">Encryption and privacy</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../deploy/">Deploy</a>
                </li>
            
            
            
                <li >
                    <a href="../improve/">Improve</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../releases/">Releases</a>
                        </li>
                    
                        <li >
                            <a href="../roadmap/">Roadmap</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../plugins/bundled/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../backends/overall/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/skoczen/will/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#configuring-will">Configuring Will</a></li>
        
            <li><a href="#environment-variables">Environment variables</a></li>
        
            <li><a href="#configpy">config.py</a></li>
        
            <li><a href="#how-environment-variables-and-configpy-are-combined">How environment variables and config.py are combined</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="configuring-will">Configuring Will</h1>
<p>Most of will's configuration is done interactively, using <code>run_will.py</code>, or specifying via the plugins.  There are, however a few built-in settings and config worth covering.  We'll aim to address all of them here.</p>
<h2 id="environment-variables">Environment variables</h2>
<p>All environment variables prefixed with <code>WILL_</code> are imported into will's <code>settings</code> modules.</p>
<p>In best practices, you should keep all of the following in environment variables:</p>
<ul>
<li><code>WILL_SLACK_API_TOKEN</code></li>
<li><code>WILL_HIPCHAT_USERNAME</code></li>
<li><code>WILL_HIPCHAT_PASSWORD</code></li>
<li><code>WILL_HIPCHAT_V2_TOKEN</code></li>
<li><code>WILL_HIPCHAT_V1_TOKEN</code></li>
<li><code>WILL_ROCKETCHAT_USERNAME</code></li>
<li><code>WILL_ROCKETCHAT_PASSWORD</code></li>
<li><code>WILL_ROCKETCHAT_URL</code></li>
<li><code>WILL_REDIS_URL</code></li>
<li>Any other tokens, keys, passwords, or sensitive URLS.</li>
</ul>
<p>We've made it easy.  No excuses. :)</p>
<h2 id="configpy">config.py</h2>
<p>Config.py is where all of your non-sensitive settings should go.   This includes things like:</p>
<ul>
<li><code>PLUGINS</code>: The list of plugins to run,</li>
<li><code>PLUGIN_BLACKLIST</code>: The list of plugins to ignore, even if they're in <code>PLUGINS</code>,</li>
<li><code>IO_BACKENDS</code>: The list services you want Will to connect to,</li>
<li><code>ANALYZE_BACKENDS</code>: The list of message-analysis backends you want Will to run through.</li>
<li><code>GENERATION_BACKENDS</code>: The list of reply-generation backends you want Will to go through.</li>
<li><code>EXECUTION_BACKENDS</code>: The list of decision-making and execution backends you want Will to go through (we recommend just having one.)</li>
<li><code>STORAGE_BACKEND</code>: Which backend you'd like to use for Will to store his long-term memory. (Built-in: 'redis', 'couchbase', 'file')</li>
<li><code>PUBSUB_BACKEND</code>: Which backend you'd like to use for Will to use for his working memory. (Built-in: 'redis'.  Soon: 'zeromq', 'builtin')</li>
<li><code>ENCYPTION_BACKEND</code>: Which backend you'd like to use for Will to encrypt his storage and memory. (Built-in: 'aes'.)</li>
<li><code>PUBLIC_URL</code>: The publicly accessible URL will can reach himself at (used for <a href="../plugins/bundled/#administration">keepalive</a>),</li>
<li><code>HTTPSERVER_PORT</code>: The port will should handle HTTP requests on.  Defaults to 80, set to &gt; 1024 if you don't have sudo,</li>
<li><code>REDIS_MAX_CONNECTIONS</code>: The maximum number of connections to make to redis, for connection pooling.</li>
<li><code>FUZZY_MINIMUM_MATCH_CONFIDENCE</code>:  What percentage of confidence Will should have before replying to a fuzzy match.</li>
<li><code>FUZZY_REGEX_ALLOWABLE_ERRORS</code>:  The maximum number of letters that can be wrong in trying to make a fuzzy match.</li>
<li><code>SLACK_DEFAULT_CHANNEL</code>: The default Slack channel to send messages to (via webhooks, etc)</li>
<li><code>HIPCHAT_ROOMS</code>: The list of rooms to join,</li>
<li><code>HIPCHAT_DEFAULT_ROOM</code>: The room to send messages that come from web requests to,</li>
<li><code>DEFAULT_BACKEND</code>: The service to send messages that come from web requests to,</li>
<li><code>TEMPLATE_DIRS</code>: Extra directories to look for templates,</li>
<li><code>ADMINS</code>: The mention names of all the admins,</li>
<li><code>LOGLEVEL</code>: What logging level to use,</li>
<li><code>HIPCHAT_SERVER</code>: if you're using the <a href="https://www.hipchat.com/server">HipChat server beta</a>, the hostname of the server,</li>
<li><code>ALLOW_INSECURE_HIPCHAT_SERVER</code>: the option to disable SSL checks (seriously, don't),</li>
<li><code>ENABLE_INTERNAL_ENCRYPTION</code>: the option to turn off internal encryption (not recommended, but you can do it.)</li>
<li><code>PROXY_URL</code>: Proxy server to use, consider exporting it as <code>WILL_PROXY_URL</code> environment variable, if it contains sensitive information</li>
<li>and all of your non-sensitive plugin settings.</li>
</ul>
<p>More expansive documentation on all of those settings is in <code>config.py</code>, right where you need it.</p>
<h2 id="how-environment-variables-and-configpy-are-combined">How environment variables and config.py are combined</h2>
<p>The environment variables and config.py are combined, and made available to the rest of the app at:</p>
<pre><code class="python">from will import settings

print settings.MY_SETTING_NAME
</code></pre>

<p>The rules for combining are fairly straightforward:</p>
<ol>
<li>All environment variables that start with <code>WILL_</code> are imported, and <code>WILL_</code> is stripped off their name. (i.e. <code>WILL_PORT</code> becomes <code>PORT</code>)</li>
<li>
<p>All variables from <code>config.py</code> are imported.  If there is a conflict, <code>config.py</code> wins, and a message is displayed:</p>
<p><img alt="Config Conflict" src="../img/config_conflict.gif" /></p>
</li>
<li>
<p>Some smart defaulting happens inside settings.py for important variables.  For the moment, I'm going to leave that out of the docs, and refer you to <code>settings.py</code> as I <em>believe</em> things should Just Work, and most people should never need to care.  If this decision's wrong, please open an issue, and these docs will be improved!</p>
</li>
</ol>
<p>That's it for config.  Now, you can either do a deeper dive into <a href="../backends/overall/">Will's brain</a>, or just get your will <a href="../deploy/">deployed</a>!</p></div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>