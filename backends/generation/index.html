<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://skoczen.github.io/will/backends/generation/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Generation</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css/style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Will</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Get Started</a>
                </li>
            
            
            
                <li >
                    <a href="../../upgrading_to_2/">Upgrade to 2.0</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Teach Your Will <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../plugins/basics/">The Basics</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/notice/">What Will Can Notice</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/reply/">How Will Can Respond</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/create/">Creating and Organizing Plugins</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/builtins/">Plugin Builtins</a>
                        </li>
                    
                        <li >
                            <a href="../../plugins/bundled/">Bundled Plugins</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../config/">Configure</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Brain <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../overall/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../io/">Noticing and Talking</a>
                        </li>
                    
                        <li >
                            <a href="../analysis/">Analysis and Context</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Generation</a>
                        </li>
                    
                        <li >
                            <a href="../execution/">Decisions and Execution</a>
                        </li>
                    
                        <li >
                            <a href="../pubsub/">Pubsub and short-term memory</a>
                        </li>
                    
                        <li >
                            <a href="../storage/">Storage and long-term memory</a>
                        </li>
                    
                        <li >
                            <a href="../encryption/">Encryption and privacy</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../deploy/">Deploy</a>
                </li>
            
            
            
                <li >
                    <a href="../../improve/">Improve</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../releases/">Releases</a>
                        </li>
                    
                        <li >
                            <a href="../../roadmap/">Roadmap</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../analysis/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../execution/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/skoczen/will/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#generation-backends">Generation Backends</a></li>
        
            <li><a href="#overview">Overview</a></li>
        
            <li><a href="#choosing-your-backends">Choosing your backends</a></li>
        
            <li><a href="#setting-your-backends">Setting your backends</a></li>
        
            <li><a href="#contributing-a-new-backend">Contributing a new backend</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="generation-backends">Generation Backends</h1>
<h2 id="overview">Overview</h2>
<p>Generation backends are Will's equivalent of that momement when we pause, and run through all the possible things we could say.  Some of them are great ideas.  Some of them are terrible ideas.  But the process of <em>generation</em> doesn't care - it's just about making as many ideas as possible.</p>
<p>Will's generation backends do the same thing - try to come up with things Will <em>could</em> say or do to respond to what he heard.</p>
<p>Will has the following generation backends built-in, and it's easy to add your own or contribute one to the project:</p>
<ul>
<li>Fuzzy Match (all) (<code>will.backends.generation.fuzzy_all_matches</code>)</li>
<li>Fuzzy Match (best) (<code>will.backends.generation.fuzzy_best_match</code>)</li>
<li>Strict Regex (<code>will.backends.generation.strict_regex</code>)</li>
</ul>
<h2 id="choosing-your-backends">Choosing your backends</h2>
<p>Like our brain processes, we can have lots of different ways to generate ideas, working together.  You don't have to pick just one generation backend for Will.  Depending on your setup, it might be the more, the merrier.</p>
<p>Here's a bit more about the built-ins, and when they'd be a good fit:</p>
<h3 id="fuzzy-match-all-willbackendsgenerationfuzzy_all_matches">Fuzzy Match (all) (<code>will.backends.generation.fuzzy_all_matches</code>)</h3>
<p>This uses the fantastic <a href="https://github.com/seatgeek/fuzzywuzzy">fuzzywuzzy</a> library to match strings with some fuzziness, as specified by <code>FUZZY_MINIMUM_MATCH_CONFIDENCE</code> (defaults to 90% confidence) and <code>FUZZY_REGEX_ALLOWABLE_ERRORS</code> (defaults to 3).</p>
<p>Great if you'd like your Will to be a little flexible, sometimes get things wrong, but to handle typos.</p>
<p><em>Required settings</em>: <code>FUZZY_MINIMUM_MATCH_CONFIDENCE</code> and <code>FUZZY_REGEX_ALLOWABLE_ERRORS</code></p>
<h3 id="fuzzy-match-best-willbackendsgenerationfuzzy_best_match">Fuzzy Match (best) (<code>will.backends.generation.fuzzy_best_match</code>)</h3>
<p>This backend is very similar to <code>fuzzy_all_matches</code>, but instead of returning all matches above a certain confidence, it just returns the best one, regardless of how good it is.</p>
<p>In general, there's no reason to use this over <code>fuzzy_all_matches</code>, unless you have a specific scenario that means you always want a response, but can't be sure of a confidence level.</p>
<h3 id="strict-regex-willbackendsgenerationstrict_regex">Strict Regex (<code>will.backends.generation.strict_regex</code>)</h3>
<p>Great for exact matches only.  If you only want your Will to do thing when it hears an exact command, or you have a bunch of different commands you're worried about getting mixed up in the fuzziness, <code>strict_regex</code> is the way for you to go.</p>
<p>This is the same behavior that was in Will 1.x and 0.x.</p>
<h2 id="setting-your-backends">Setting your backends</h2>
<p>To set your generation backends, just update the following in <code>config.py</code></p>
<pre><code class="python"># Backends to generate possible actions, and metadata about them.
GENERATION_BACKENDS = [
    &quot;will.backends.generation.fuzzy_all_matches&quot;,
    &quot;will.backends.generation.strict_regex&quot;,
    # &quot;will.backends.generation.fuzzy_best_match&quot;,
]
</code></pre>

<h2 id="contributing-a-new-backend">Contributing a new backend</h2>
<p>Writing a new generation backend is easy - just subclass <code>GenerationBackend</code>, and implement <code>do_generate</code>:</p>
<p>Note that the method should return a list of <code>GeneratedOption</code>s, including context, the backend name, and a score.</p>
<pre><code class="python">from will.backends.generation.base import GenerationBackend, GeneratedOption


class MyGreatGenerationBackend(GenerationBackend):

    def do_generate(self, event):
        &quot;&quot;&quot;Returns a list of GeneratedOptions&quot;&quot;&quot;
        matches = []

        message = event.data
        for name, l in self.bot.message_listeners.items():
            if this_is_a_perfect_match(message, l):
                o = GeneratedOption(context=context, backend=&quot;regex&quot;, score=100)
                matches.append(o)

        return matches

</code></pre>

<p>From there, just test it out, and when you're ready, submit a <a href="https://github.com/skoczen/will/pulls">pull request!</a></p>
<p>Now we've got a host of possible things Will can do and say.  It's time to look at how <a href="../../backends/execution">Will decides what to do</a>.</p></div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>